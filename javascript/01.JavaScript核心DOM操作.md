# 01-Web API简介

- 能够说出Web API阶段与javascript语法阶段的关联性
- 能够说出什么是API
- 能够说出什么是Web API

## 01.2-JS基础和Web API两个阶段的关联性

![1570025577823](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570025577823.png)

**JS基础阶段**

- 我们学习的是ECMAscript标准规定的基本语法
- 要求我们掌握js基础语法
- 只学习基本语法做不了常用法人网页交互效果
- 目的是为了js后面的课程打基础、做铺垫

**WebAPI阶段**

- Web APIs是W3C组织的标准
- Web APIs 我们主要学习DOM和BOM
- Web APIs 是我们js所独有的部分
- 我们主要学习页面交互功能
- 需要使用js基础的课程内容做铺垫

js基础学习ECMAscript基础语法为后面作铺垫，Web APIs 是js的应用，大量使用js基础语法做交互效果

## 01.3-API和Web API

### 1.3.1 API简介

![1570026125048](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570026125048.png)

### 1.3.2 Web API简介

**Web API 是浏览器**提供的一套操作**浏览器功能**和**页面元素**的API(BOM和DOM)。

现阶段我们主要针对浏览器讲解常用的API，主要针对浏览器做交互效果。

比如我们想要浏览器弹出一个警示框，直接使用alert('弹出')

MDN详细API：https://developer.mozilla.org/zh-CN/docs/Web/API

因为Web API很多，所以我们将这个阶段称为 Web APIs

### 1.3.3 API和Web API总结

1. **API是为我们程序员提供的一个接口，帮助我们实现某种功能，我们会使用就可以了，不必纠结内部如何实现**
2. Web API主要是针对浏览器提供的接口，主要针对于浏览器做交互效果
3. Web API 一般都有输入和输出(函数的传参合返回值)，Web API很多都是方法(函数)
4. 学习Web API可以结合前面学习内置对象方法的思路学习

# 02-DOM导读

- 能够说出什么是DOM
- 能够获取页面元素
- 能够给元素注册事件
- 能够操作DOM元素的属性
- 能够创建元素
- 能够操作DOM节点

## 2.1 DOM简介

### 2.1.1什么是DOM？

```
文档对象模型(document Object Model，简称dom)，是W3C组织推荐的处理可扩展标记语言(HTML或者XML)的标准 编程接口

W3C已经定义了一系列的DOM 接口，通过这些DOM接口可以改变网页的内容，结构和样式
```

### 2.1.2DOM树

![1570027356974](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570027356974.png)

- 文档：一个页面就是一个文档，DOM中使用document表示
- 元素：页面中的所有标签都是元素，DOM中使用element表示
- 节点：网页中所有内容都是节点(标签、属性、文本、注释等)，DOM中使用node表示

**DOM把以上内容都看做是对象**

## 2.2getElementByld获取页面元素

DOM在我们实际开发中主要用来操作元素

我们如何来获取页面中的元素呢？

获取页面中的元素可以使用以下几种方式：

- 根据ID获取
- 根据标签名获取
- 通过HTML5新增的方法获取
- 特殊元素获取

### 2.2.1根据ID获取

使用getElementByld()方法获取带有id的元素对象。

[`Document`](https://developer.mozilla.org/zh-CN/docs/Web/API/Document)的方法 [`getElementById()`](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/getElementById)返回一个匹配特定 [ID](https://developer.mozilla.org/en-US/docs/DOM/element.id)的元素. 由于元素的 ID 在大部分情况下要求是独一无二的，这个方法自然而然地成为了一个高效查找特定元素的方法。

语法：

```
var element = document.getElementById(id);
```

**参数**

- **element**是一个 [Element](https://developer.mozilla.org/zh-CN/docs/Web/API/Element) 对象。如果当前文档中拥有特定ID的元素不存在则返回null.
- **id**是大小写敏感的字符串，代表了所要查找的元素的唯一ID.

```
    <div id="time">2019-10.2</div>

    <script>
        
        //1. 因为我们文档页面从上往下加载，所以先得有标签 
        所以我们script写到标签的下面
        //2. get获得element 元素 by通过 驼峰法命名
        //3. 参数id 是大小写敏感的字符串
        //4. 返回的是一个元素对象
        var timer = document.getElementById('time');
        console.log(timer);
        console.log(typeof timer);//object
        //5. console.dir打印我们返回的元素对象 更好的查看里面的属性和方法
        console.dir(timer);//好多属性 和方法
        
```



### 2.2.2 根据标签名获取

使用getElementsByTagName()方法可以返回带有指定签名的**对象的集合**

**两种方式：**

```
document.getElementsByTagName('标签名');
```

```
element.getElementsByTagName('标签名');
```

注意：

1. 因为得到的是一个对象的集合，所以我们想要操作里面的元素就需要遍历
2. 得到元素对象是动态的

![1570031227587](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570031227587.png)

```
   <ul>
        <li> 晚安呐1s</li>
        <li> 晚安呐2s</li>
        <li> 晚安呐3s</li>
        <li> 晚安呐4s</li>
        <li> 晚安呐5s</li>
    </ul>
    <ol id="znz">
        <li> 晚安呐7s</li>
        <li> 晚安呐7s</li>
        <li> 晚安呐7s</li>
        <li> 晚安呐7s</li>
        <li> 晚安呐7s</li>
    </ol>
    
    <script>
        //1.返回的是 获取过来元素对象的集合 以伪数组的形式存储
        var llg = document.getElementsByTagName('li')
        console.log(llg);
        console.log(llg[0]);


        //2.依次打印元素 采用遍历方式
        for (var i = 0; i < llg.length; i++) {
            console.log(llg[i]);
        }
        //3.如果一个页面只有一个li  返回的还是伪数组的形式
        //4.如果页面中没有这个元素  返回的是空的伪数组的形式
        //5.指定 element.getElementsByTagName('标签名');
        //父元素必须是指定的单个元素
        //var ol = document.getElementsByTagName('ol');
        //console.log(ol[0].getElementsByTagName('li'));

        //用id写方便
        var ol = document.getElementById('znz');
        console.log(ol.getElementsByTagName('li'));
	</script>
```

### 2.2.3 H5新增获取元素方式

```
1. document.getElementsByClassName('类名');//根据类名返回元素对象集合
```

```
2. document.querySelector('选择器'); //根据指定选择器返回第一个元素对象
```

```
//3.document.querySelectorAll('选择器'); // 根据指定选择器返回选择器的所元素对     象集合
```

```
    <div class="box">盒子1</div>
    <div class="box">盒子2</div>
    <div id="nav">
        <ul>
            <li>首页</li>
            <li>产品</li>
        </ul>
    </div>
    <script>
        //1. document.getElementsByClassName('类名');
        //根据类名返回元素对象集合
        var boxs = document.getElementsByClassName('box');
        console.log(boxs);

        //2.document.querySelector('选择器'); 
        //根据指定选择器返回第一个元素对象
        //切记 里面的选择器需要加符号 类 加 .box  id就要加 #号
        var firstBox = document.querySelector('.box');
        console.log(firstBox);
        var nav = document.querySelector('#nav');
        console.log(nav);
        var li = document.querySelector('li');
        console.log(li);

        //3.document.querySelectorAll('选择器'); 
        // 根据指定选择器返回选择器的所元素对象集合
        var allbox = document.querySelectorAll('.box');
        console.log(allbox);

        var lis = document.querySelectorAll('li');
        console.log(lis);
    </script>
```

![1570080387388](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570080387388.png)

### 2.2.4 获取特殊元素(body，html)

1. 获取body元素

```
document.body //返回body元素对象
```

```
    // 1.获取body元素
    // document.body //返回body元素对象
         var bodyEle = document.body;
         console.log(bodyEle);
         console.dir(bodyEle);
```

2. 获取html元素

```
//document.documentElement  //返回html元素对象
```

```
    // 2. 获取html 元素 
        //document.documentElement  //返回html元素对象
         var htmlEle = document.documentElement;
         console.log(htmlEle);
```

## 2.3 事件基础

### 2.3.1 事件概述

javaScript使我们有能力创建动态页面，而事件是可以被javascript侦测到行为的。

简单理解： 出发---响应机制

网页中的每个元素都可以产生某些可以触发javascript的事件，例如，我们可以在用户点击某按钮时产生一个事件，然后去执行某些操作。

### 2.3.2 事件三要素

```
    <button id="btn">点我吧</button>
    <script>
        // 点击一个按钮  弹出对话框
        //  1. 事件是由 三部分组成  事件源  事件类型 事件处理程序 称之为事件三要素

        // (1) 事件源 事件被触发的对象   谁 ： 按钮
        var btn = document.getElementById('btn');
        // (2) 事件类型 如何触发 什么事件  比如鼠标点击(onclick) 还是鼠标经过  还是键盘按下
        // (3) 事件处理程序  通过一个函数赋值的方式  完成
        btn.onclick = function(params) {
            alert('点我成功了哎');
        }
    </script>

```

### 2.3.3  执行事件的步骤

1.  获取事件源

2.  注册事件(绑定事件)

3.  添加事件处理程序    (添加事件处理程序(采取函数赋值形式))



```
    <div>123</div>
    <script>
        // 执行事件步骤
        //点击div 控制台输出 我被选中了
        // 1.获取事件源
        var div = document.querySelector('div');
        // 2.绑定事件， 注册事件
        //div.onclick
        // 3. 添加事件处理程序
        div.onclick = function() {
            console.log('我被选中了');
            
        }
    </script>
```

![1570083662572](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570083662572.png)

2.3.4 分析事件三要素

下拉菜单三要素

关闭广告三要素

## 2.4 操作元素(核心)

javaScript的DOM操作可以改变网页内容，结构和样式，我们可以利用DOM操作元素来改变元素里面的内容，属性等。注意以下都是属性

### 2.4.1 改变元素内容

1. 从起始位置到终止位置的内容，但它除去html标签，同时空格哥换行也会去掉

```
//Element.innerText
```

```js
<button>显示当前系统时间</button>
    <div>某个时间</div>
    <p>112</p>
    <script>
        //Element.innerText
        //从起始位置到终止位置的内容，但它除去html标签，同时空格哥换行也会去掉

        //Element.innerHTML
        //起始位置到终止位置的全部内容，包括html标签，同时保留空格和换行

        //当我们点了按钮，  div里面的文字会发生变化
        //1. 获取元素
        var btn = document.querySelector('button');
        var div = document.querySelector('div')
        //2. 注册事件
        btn.onclick = function (params) {
            div.innerText = getDate();
        }

        function getDate(params) {
            var date = new Date();
            //console.log(date.getFullYear());//返回当前日期的年 2019
            //console.log(date.getMonth() + 1);//返回月份  记得月份加1哦
            //console.log(date.getDate());// 返回的是  几号
            //console.log(date.getDay());//3  周一返回的是1 周六返回的是6 
            但是周日返回的是  0
            //我们写一个2019年10月3日  星期四
            var year = date.getFullYear();
            var month = date.getMonth();
            var dates = date.getDate();
            var arr = ['星期日', '星期一', '星期二', '星期三', '星期五', '星期六'];
            var day = date.getDay();
            //console.log('今天是：'+year + '年'+ month + '月' + dates + '日'+ arr[day]);
            return '今天是：' + year + '年' + month + '月' + dates + '日' + arr[day];
        }


        //元素可以不用添加事件 
        var p = document.querySelector('p');
        p.innerText = getDate();
    </script>

```

![ ](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570086691923.png)

1. 起始位置到终止位置的全部内容，包括html标签，同时保留空格和换行

```
//Element.innerHTML
```

### 2.4.2 innerText和innerHTML的区别

```
    <div></div>
    <p>
        我是文字
        <span>123</span>
    </p>
    <script>
        // innerText和 innerHTML的区别
        // 1. innerText  不识别HTML标签   非标准
        //var div = document.querySelector('div');
        //div.innerText='<strong>今年是:</strong>2019年';
        // 2. innerHTML   识别婚途陌路  W3C标准
        //div.innerHTML = '<strong>今年是:</strong>2019年';//今年是加粗
        var p =document.querySelector('p');
        console.log(p.innerHTML);//格式保留  使用最多
        console.log(p.innerText);//
    </script>
```

简单粗暴的说就是:**innerHTML保留格式** 

###  2.4.3 常用元素的属性操作

1. innerText、innerHTML 改变元素内容
2. src、href
3. id、alt、title

**案例：图片的切换**

```
<button id="ldh">按钮1</button>
    <button id="zxy">按钮2</button><br>
    <img src="F:/桌面/图片网站/zsh.jpg" alt="">
    
    <script>
        // 修改元素属性  src
        // 1. 获取元素
        var ldh = document.getElementById('ldh');
        var zxy = document.getElementById('zxy');
        var img = document.querySelector('img');
        //2. 注册事件  处理程序
        zxy.onclick = function () {
            img.src = 'F:/桌面/图片网站/wsh.jpg';
        }
        ldh.onclick = function () {
            img.src = "F:/桌面/图片网站/zsh.jpg";
        } 
    </script>
```



### 2.4.4 案例：分时显示不同图片，显示不同问候语

根据不同时间，页面显示不同图片，同时显示不同的问候语。

如果上午时间打开页面，显示上午好，显示上午图片

如果下午时间打开页面，显示下午好，显示下午图片

晚上同

在登录邮箱时会见 

1. 根据系统不同时间来判断，所以需要用到日期内置对象
2. 利用多分支语句来设置不同的图片
3. 需要一个图片，并且根据时间修改图片，就需要用到操作元素src属性
4. 需要有个div元素，显示不同问候语，修改元素内容即可

```
    <img src="F:\桌面\图片网站\zsh.jpg" alt="">
    <div>上午好</div>
    <script>
    
        //1. 根据系统不同时间来判断，所以需要用到日期内置对象
        //2. 利用多分支语句来设置不同的图片
        //3. 需要一个图片，并且根据时间修改图片，就需要用到操作元素src属性
        //4. 需要有个div元素，显示不同问候语，修改元素内容即可
        //1.获取元素
        var img = document.querySelector('img');
        var div = document.querySelector('div');
        //2. 得到当前的小时数
        var date = new Date();
        var h = date.getHours();
        //3. 判断小时数改变图片和文字信息
        if (h < 12) {
            img.src = 'F:/桌面/图片网站/zsh.jpg';
            div.innerHTML = '上午好，好好写代码';
        } else if(h < 18){
            img.src = 'F:/桌面/图片网站/timg.jpg';
            div.innerHTML = '下午好，好好写代码';
        }else{
            img.src = 'F:/桌面/图片网站/wsh.jpg';
            div.innerHTML = '晚上好，好好写代码';
        }
         </script>
```

**2.4.5 表单元素的修改操作**

利用DOM可以操作如下表单元素的属性：

```
type、value、checked、selected、disabled
```

```
<button>提交</button>
    <input type="text" value="输入内容">

    <script>
        //1. 获取元素
        var btn = document.querySelector('button');
        var input = document.querySelector('input');
        //2. 注册事件 处理程序
        btn.onclick = function (params) {
            //input.innerHTML = '提交内容成功'; 
            这个是 普通盒子 比如 div 标签里面的内容
            //表单里面的值  文字内容是通过 value来修改的
            input.value = '提交内容成功';
            //如果想要某个表单被禁用  不能再点击  disabled  
            //btn.disabled = true;
            this.disabled = true;
            //this 指向的是事件函数的调用者  btn
        }
    </script>
```

案例：仿京东显示密码

点击按钮将密码框切换为文本框，并可以查看密码明文。

1. 核心思路：点击眼睛按钮，把密码框类型改为文本框就能看见里面的密码
2. 一个按钮两个状态，点击一次，切换为文本框，继续点击一次切换为密码框
3. 算法：利用一个flag变量，来判断flag的值，如果是1 就切换为文本框，flag设置为0，如过是0就切换为密码框，flag设置为1

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        .box {
            position: relative;
            width: 400px;
            border-bottom: 1px solid #ccc;
            margin: 100px auto;
        }

        .box input {
            width: 370px;
            height: 30px;
            border: 0;
            outline: none;
        } 

        .box img {
            position: absolute;
            width: 24px;
            top: 2px;
            right: 2px;
            width: 24px;
        }
    </style>
</head>

<body>
    <div class="box">
        <label for="">
            <img src="F:/桌面/icon_exkd16edmzq/biyan.png" alt="" id="eye">
        </label>
        <input type="password" name="" id="pad">
    </div>
    <script>
        var eye = document.getElementById('eye');
        var pad = document.getElementById('pad')
        var flag = 0;
        eye.onclick = function (params) {
            if (flag == 0) {
                pad.type = 'text';
                eye.src = 'F:/桌面/icon_exkd16edmzq/open.png';
                flag = 1;
            } else {
                pad.type = 'password';
                eye.src = 'F:/桌面/icon_exkd16edmzq/biyan.png';
                flag = 0;
            }

        }


    </script>
</body>

</html>
```

### 2.4.5 样式属性操作

我们可以通过js修改元素的大小、颜色、位置等样式

```
1. element.style         行内样式操作
2. element.className	 类名样式操作
```

注意：

1. **JS里面的样式采用驼峰命名法 比如：fontSize、backgroundColor**
2. **JS修改style 样式操作 ，产生的是行内样式， css权重比较高**



```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        div {
            width: 200px;
            height: 200px;
            background-color: pink;
        }
    </style>
</head>

<body>
    <div></div>
    <script>
        //1. 获取元素
        var div = document.querySelector('div');
        div.onclick = function (params) {
            // 2. div.style  里面的属性 采用驼峰命名法
            this.style.backgroundColor = 'purple';//js行内元素  权重高
            this.style.width = '500px';
        }


    </script>
</body>

</html>
```

### 2.4.6 案例：防淘宝关闭二维码案例

**案例分析**



- 核心思路：利用样式的显示和隐藏，display ： none隐藏元素 display：block显示元素
- 点击按钮，就让这个二维码盒子隐藏起来即可

![1570194033774](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570194033774.png)

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        .box {
            width: 88px;
            height: 88px;
            border: 1px solid #ccc;
            margin: 100px auto;
            font-size: 12px;
            text-align: center;
            color: #f40
        }

        .box img {
            width: 60px;
            margin-top: 5px;
        }

        .close-btn {
            position: absolute;
            top: 100px;
            left: 360px;
            width: 14px;
            height: 14px;
            border: 1px solid #ccc;
            line-height: 14px;
            font-family: Arial, Helvetica, sans-serif;
            cursor: pointer;
            display: block;
        }
    </style>
</head>

<body>
    <div class="box">
        淘宝二维码
        <img src="F:/桌面/icon/ico.png" alt="">
        <i class="close-btn">x</i>
    </div>
    <script>
        //1. 获取元素
        var btn = document.querySelector('.close-btn');
        var box = document.querySelector('.box');
        //2. 注册事件  程序处理
        btn.onclick = function (params) {
            box.style.display = 'none';
        }
    </script>

</body>

</html>
```

### 2.4.7 案列-循环精灵图背景

可以利用for循环设置一组元素的精灵图背景

![1570196765114](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570196765114.png)

![1570197606328](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570197606328.png)

案列分析

1. 首先精灵图图片排列是有规律的
2. 核心思路：利用for循环 修改精灵图片的背景位置 background-position
3. 发现规律
4. 让循环里面的i索引号*44 就是每个图片的y坐标

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        li{
            list-style-type: none;
        }
        .box{
            width:250px;
            margin: 100px auto;
        }
        .box li{
            float: left;
            width: 24px;
            height: 24px;
            background-color: pink;
            margin: 15px;
            background: url(F:/桌面/icon/ico.png) no-repeat;
        }
    
    
    </style>
</head>
<body>
    <div class="box">
        <ul>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>
    <script>
        //1. 获取元素 所有A的小li
        var lis = document.querySelectorAll('li');
        //让索引号 乘以44  就是每个li 的背景y坐标  index就是我们的y坐标
        for(var i=0;i<lis.length;i++){
            var index = i * 44;
            lis[i].style.backgroundPosition= '0 -' + index + 'px'
        }//保留负号  
    </script>
    
</body>
</html>
```

### **2.4.8** 案例显示隐藏文本框内容

**当鼠标点击文本框时，里面的默认文字隐藏，当鼠标离开文本框时，里面的文字显示**

![1570198533014](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570198533014.png)

- 首先表单需要2个新的事件，获得焦点onfocus 失去焦点 onblur

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        input {
            color: #999;
        }
    </style>
</head>

<body>
    <input type="text" value="手机">
    <script>
        //1. 获取元素
        var text = document.querySelector('input');
        //2. 注册事件  获得焦点事件 onfocus
        text.onfocus = function (params) {
            console.log('得到了焦点');
        }
        //3. 注册事件 失去焦点事件 
        text.onblur = function (params) {
            console.log('失去了焦点');
        }


    </script>
</body>

</html>
```



- 如果获得了焦点，判断表单里面内容是否为默认字，如果是默认字，就清空表单内容

  ```
  <script>
          //1. 获取元素
          var text = document.querySelector('input');
          //2. 注册事件  获得焦点事件 onfocus
          text.onfocus = function (params) {
              //console.log('得到了焦点');
              if (this.value === '手机') {
                  this.value = '';
              }
          }
          //3. 注册事件 失去焦点事件 
          text.onblur = function (params) {
              console.log('失去了焦点');
          }
  
  
      </script>
  ```

  

- 如果失去焦点，判断表单内容是否为空，如果为空，则表单内容改为默认文字

综合代码

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        input {
            color: #999;
        }
    </style>
</head>

<body>
    <input type="text" value="手机">
    <script>
        //1. 获取元素
        var text = document.querySelector('input');
        //2. 注册事件  获得焦点事件 onfocus
        text.onfocus = function (params) {
            //console.log('得到了焦点');
            if (this.value === '手机') {
                this.value = '';
            }
            // 获得焦点需要把文本框里面的文字颜色变黑
            this.style.color = '#333';
        }
        //3. 注册事件 失去焦点事件 
        text.onblur = function (params) {
            //console.log('失去了焦点');
            if (this.value === '') {
                this.value = '手机';
            }
            // 获得焦点需要把文本框里面的文字颜色变浅色
            this.style.color = '#999';
        }
    </script>
</body>
</html>
```

**获得焦点：onfocus**

**失去焦点：onblur**

### 2.4.9 使用className修改样式属性

简单说就是通过JS修改元素大小、颜色、位置等样式。

```
1. element.style      行内样式操作
2. element.className  类名样式操作
```

注意：

1. 如果样式修改较多，可以采取操作类名方式更改元素样式
2. class因为是个保留字，因此使用className来操作元素类名属性
3. className会直接更改元素的类名，会覆盖原先的类名

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        .first {
            width: 100px;
            height: 100px;
            margin-top: 100px;
            background-color: pink;
            font-size: 15px;
        }
        .change{
            background-color: purple;
            clear: #fff;
            font-size: 25px;
            margin-top: 0px;
        }
    </style>
</head>

<body>
    <div class="first">文本</div>
    <script>
        //1. 使用element.style  获得修改元素样式
        var demo = document.querySelector('div');
        demo.onclick = function (params) {
            //this.style.backgroundColor = 'red';
            //this.style.fontSize = '20px';
            //让当前元素的类名改为change

            //2. 我们可以通过 修改元素的className 更改元素的样式 适合于样式较多或者功能复杂的情况
            this.className = 'first change';//保留原来样式
            //this.className = 'change';//替换覆盖原来样式
        }
    
    
    </script>

</body>

</html>
```

### 2.4.10  密码框验证信息

​    新浪注册

![1570259528590](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570259528590.png)



案例分析：

- **首先判断的事件是表单失去焦点onblur**

```
    <script>
        //首先判断的事件是表单失去焦点onblur
        //如果输入正确提示正确的我信息颜色为绿色小图标变化
        //如果输入不是6到16位，则提示错误信息颜色为红色 小图标变化
        //因为里面变换样式较多，我们采用ClassName修改样式
        //1.获取元素
        var ipt = document.querySelector('.ipt');
        var message = document.querySelector('.message');
        //2. 注册事件  失去焦点
        ipt.onblur = function (params) {
            //根据表单里面值的长度  ipt.value.length
            if (this.value.length < 6 || this.value.length > 16) {
                console.log('错误');
            }
        }
    </script>
```

- 如果输入正确提示正确的我信息颜色为绿色小图标变化 
- 如果输入不是6到16位，则提示错误信息颜色为红色 小图标变化
- 因为里面变换样式较多，我们采用ClassName修改样式

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        div {
            width: 600px;
            margin: 100px auto;
        }

        .message {
            display: inline-block;
            font-size: 12px;
            color: #999;
            background: url(F:/桌面/icon/gantanhao.png)no-repeat left center;
            padding-left: 20px;
        }

        .wrong {
            color: red;
            background-image: url(F:/桌面/icon/error.png);
        }

        .right {

            color: green;
            background-image: url(F:/桌面/icon/duihao.png);
        }
    </style>
</head>

<body>
    <div class="register">
        <!--register登记-->
        <input type="password" class="ipt">
        <p class="message">请输入6~16密码</p>
        <!--message 消息-->
    </div>
    <script>
        //首先判断的事件是表单失去焦点onblur
        //如果输入正确提示正确的我信息颜色为绿色小图标变化
        //如果输入不是6到16位，则提示错误信息颜色为红色 小图标变化
        //因为里面变换样式较多，我们采用ClassName修改样式
        //1.获取元素
        var ipt = document.querySelector('.ipt');
        var message = document.querySelector('.message');
        //2. 注册事件  失去焦点
        ipt.onblur = function (params) {
            //根据表单里面值的长度  ipt.value.length
            if (this.value.length < 6 || this.value.length > 16) {
                //console.log('错误');
                message.className = 'message wrong';
                message.innerHTML = '您输入的位数不对 要求6~16位';
            } else {
                message.className = 'message right';
                message.innerHTML = '您输入的正确';
            }
        }
    </script>
</body>

</html>
```

## 2.5 操作元素总结

操作元素是DOM的核心内容



## ![1570283914227](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570283914227.png)2.6 排他思想

如果有同一组元素，我们想要某一个元素实现某种样式，需要用到循环的排他思想算法；

- 所有元素全部清除样式(干掉其他人)
- 给当前元素设置样式(留下自己)
- 注意顺序不能颠倒，首先要干掉其他人，再设置自己

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <button>按钮1</button>
    <button>按钮2</button>
    <button>按钮3</button>
    <button>按钮4</button>
    <button>按钮5</button>
    <script>
        //1. 获取所有元素  兼容用getElementsByTagName IE8
        var btns = document.getElementsByTagName('button');
        // btns 得到的是伪数组 里面的每一个元素 buts[i]
        for (var i = 0; i < btns.length; i++) {
            btns[i].onclick = function (params) {
                //(1) 我们先把所有的按钮背景颜色去掉
                for (var i = 0; i < btns.length; i++) {
                    btns[i].style.backgroundColor = '';
                }
                //(2) 然后才让当前的元素背景颜色为pick
                this.style.backgroundColor = 'pink';
            }
        }
    //2.  首先先排除他人，然后才设置自己的样式 这种排除其他人的思想我们称之为排他思想
    </script>
</body>

</html>
```

## 2.7 百度换肤案例

- 这个案例练习的是给一组元素注册事件
- 给4个小图片利用循环事件注册点击事件
- 当我们点击了这个图片，让我们页面背景改为当前的图片
- 核心算法：把当前的图片的src路径取过来，给body做为背景图片即可

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        body {
            background: url(F:/桌面/图片网站/timg.jpg) no-repeat center top;
        }

        li {
            list-style: none;
        }

        .baidu {
            overflow: hidden;
            margin: 100px auto;
            background-color: #fff;
            width: 410px;
            padding-top: 3px;
        }

        .baidu li {
            float: left;
            margin: 0 1 px;
            cursor: pointer;
        }

        .baidu img {
            width: 100px;
        }
    </style>
</head>

<body>
    <ul class="baidu">
        <li><img src="F:/桌面/图片网站/timg.jpg" alt=""></li>
        <li><img src="F:/桌面/图片网站/wsh.jpg" alt=""></li>
        <li><img src="F:/桌面/图片网站/login_logo.png" alt=""></li>
        <li><img src="F:/桌面/图片网站/zsh.jpg" alt=""></li>
    </ul>
    <script>
        //1. 获取元素
        var imgs = document.querySelector('.baidu').querySelectorAll('img');
        //console.log(imgs);
        //2. 循环注册事件
        for (var i = 0; i < imgs.length; i++) {
            imgs[i].onclick = function (params) {
                //this.src 及时我们点击图片的路径 
                //console.log(this.src);
                //把this。src 给body就可以
                document.body.style.backgroundImage = 'url(' + this.src + ')';

            }
        }

    </script>
</body>

</html>
```

## 2.8 表格隔行变色效果

![1570521208909](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570521208909.png)

**新浪的js功能**

![1570521260775](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570521260775.png)

案例分析

- 用到新的鼠标事件 鼠标经过onmouseover 鼠标离开 onmouseout
- 核心思路： 鼠标经过tr行 ，当前的行变背景颜色，鼠标离开去掉当前的背景颜色
- 注意：第一行(thead里面的行) 不需要变换颜色，因此我们获得的是tbody里面的行

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        thead tr {
            height: 30px;
            background-color: skyblue;
        }

        tbody tr {
            height: 30px;
        }

        tbody td {
            border-bottom: 1px solid #d7d7d7;
            font-size: 12px;
            color: blue;
        }

        .bg {
            background-color: pink;
        }
    </style>
</head>

<body>
    <table>
        <thead>
            <tr>
                <th>代码</th>
                <th>名称</th>
                <th>最新公布净值</th>
                <th>最新净值</th>
                <th>前单位净值</th>
                <th>净值增长率</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>0.323</td>
                <td>银行三个月定期开放债券</td>
                <td>10.2.2</td>
                <td>1.022</td>
                <td>1.55</td>
                <td>+0.23.2</td>
            </tr>

            <tr>
                <td>0.323</td>
                <td>银行三个月定期开放债券</td>
                <td>10.2.2</td>
                <td>1.022</td>
                <td>1.55</td>
                <td>+0.23.2</td>
            </tr>
            <tr>
                <td>0.323</td>
                <td>银行三个月定期开放债券</td>
                <td>10.2.2</td>
                <td>1.022</td>
                <td>1.55</td>
                <td>+0.23.2</td>
            </tr>
            <tr>
                <td>0.323</td>
                <td>银行三个月定期开放债券</td>
                <td>10.2.2</td>
                <td>1.022</td>
                <td>1.55</td>
                <td>+0.23.2</td>
            </tr>
        </tbody>
    </table>
    <script>
        //1. 获取元素 获取的是tbody里面所有的行
        var trs = document.querySelector('tbody').querySelectorAll('tr');
        //2. 利用循环注册事件
        for (var i = 0; i < trs.length; i++) {
            //3. 鼠标经过事件 onmouseover
            trs[i].onmouseover = function (params) {
                //console.log(11);
                this.className = 'bg';
            }
            //4. 鼠标离开事件 onmouseout
            trs[i].onmouseout = function (params) {
                this.className = '';
            }
        }
    </script>
</body>

</html>
```

## 2.9表单全选取消全选



![1570523663452](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570523663452.png)

案例分析 

- 全选和取消全选做法：让下面所有复选框的checked属性(选中状态)跟随 全选按钮即可

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        .wrap {}

        table {
            margin: auto;
            font-size: 18px;
        }

        thead tr {
            background-color: skyblue;
        }

        tbody tr {
            height: 30px;
        }

        tbody td {
            border-bottom: 0.5px solid #d7d7d7;
            font-size: 13px;
            color: blue;
        }
    </style>
</head>

<body>
    <div class="wrap">
        <table>
            <thead>
                <tr>
                    <th>
                        <input type="checkbox" id="j_cbAll" />
                    </th>
                    <th>商品</th>
                    <th>价钱</th>
                </tr>
            </thead>
            <tbody id="j_tb">
                <tr>
                    <td>
                        <input type="checkbox">
                    </td>
                    <td>ipone</td>
                    <td>8000</td>
                </tr>
                <tr>
                    <td>
                        <input type="checkbox">
                    </td>
                    <td>ipad Pro</td>
                    <td>5000</td>
                </tr>
                <tr>
                    <td>
                        <input type="checkbox">
                    </td>
                    <td>ipone x</td>
                    <td>6600</td>
                </tr>
                <tr>
                    <td>
                        <input type="checkbox">
                    </td>
                    <td>ipone 11</td>
                    <td>11000</td>
                </tr>
                <tr>
                    <td>
                        <input type="checkbox">
                    </td>
                    <td>Apple Watch</td>
                    <td>2000</td>
                </tr>
            </tbody>
        </table>
    </div>
    <script>
        var j_cbAll = document.getElementById('j_cbAll');//全选按钮
        var j_tbs = document.getElementById('j_tb').getElementsByTagName('input');//下面所有的复选框
        //注册事件
        j_cbAll.onclick = function (params) {
            //console.log(this.checked);
            //this.checked 它可以得到当前复选框的选中状态如果是true 就是选中 ，如果是false就是未选中
            for (var i = 0; i < j_tbs.length; i++) {
                j_tbs[i].checked = this.checked;//全选和取消全选
            }

        }

    </script>
</body>

</html>
```

- **下面复选框需要全部选中，上面全选才能选中做法**：给下面所有复选框绑定点击事件，每次点击，都要循环查看下面所有的复选框是否有没选中的，如果有一个没选中的，上面全选就不选中。

- 可以设置一个变量，来控制全选是否选中

  

  **完整代码**

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        .wrap {}

        table {
            margin: auto;
            font-size: 18px;
        }

        thead tr {
            background-color: skyblue;
        }

        tbody tr {
            height: 30px;
        }

        tbody td {
            border-bottom: 0.5px solid #d7d7d7;
            font-size: 13px;
            color: blue;
        }
    </style>
</head>

<body>
    <div class="wrap">
        <table>
            <thead>
                <tr>
                    <th>
                        <input type="checkbox" id="j_cbAll" />
                    </th>
                    <th>商品</th>
                    <th>价钱</th>
                </tr>
            </thead>
            <tbody id="j_tb">
                <tr>
                    <td>
                        <input type="checkbox">
                    </td>
                    <td>ipone</td>
                    <td>8000</td>
                </tr>
                <tr>
                    <td>
                        <input type="checkbox">
                    </td>
                    <td>ipad Pro</td>
                    <td>5000</td>
                </tr>
                <tr>
                    <td>
                        <input type="checkbox">
                    </td>
                    <td>ipone x</td>
                    <td>6600</td>
                </tr>
                <tr>
                    <td>
                        <input type="checkbox">
                    </td>
                    <td>ipone 11</td>
                    <td>11000</td>
                </tr>
                <tr>
                    <td>
                        <input type="checkbox">
                    </td>
                    <td>Apple Watch</td>
                    <td>2000</td>
                </tr>
            </tbody>
        </table>
    </div>
    <script>
        var j_cbAll = document.getElementById('j_cbAll');//全选按钮
        var j_tbs = document.getElementById('j_tb').getElementsByTagName('input');//下面所有的复选框
        //注册事件
        j_cbAll.onclick = function (params) {
            //console.log(this.checked);
            //this.checked 它可以得到当前复选框的选中状态如果是true 就是选中 ，如果是false就是未选中
            for (var i = 0; i < j_tbs.length; i++) {
                j_tbs[i].checked = this.checked;//全选和取消全选
            }

        }
        //2. 下面复选框需要全部选中，上面全选才能选中做法：
        //给下面所有复选框绑定点击事件，每次点击，
        //都要循环查看下面所有的复选框是否有没选中的，如果有一个没选中的，上面全选就不选中。
        for (var i = 0; i < j_tbs.length; i++) {
            j_tbs[i].onclick = function (params) {
                //flag 控制全选按钮是否选中
                var flag = true;
                //每次点击下面的复选框都要循环检查这5个按钮是否全被选中
                for (var i = 0; i < j_tbs.length; i++) {
                    if (!j_tbs[i].checked) {
                        flag = false;
                        break;//退出for循环  这样可以提高执行效率，因为只要有一个没有选中，剩下的就无需循环判断了
                    }
                }
                j_cbAll.checked = flag;
            }
        }
    </script>
</body>

</html>
```



# 03 -DOM 节点操作

## 3.1 获取自定义属性值

**1.获取属性值**

- element.属性  获取属性值
- element.getAttribute('属性')；

**区别**

- element.属性     获取内置属性值(元素本身自带的属性)
- element.getAttribute('属性')； 主要获得自定义的属性 (标准) 我们程序员自定义的属性

![1570548378459](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570548378459.png)



```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div id="demo" index="1"></div>
    <script>
        var div = document.querySelector('div');
        //1. 获取元素的属性值
        //（1）element.属性
        console.log(div.id);
        //(2) element.getAttribute('属性')  get得到属性 attribute 属性的意思
        //我们程序员自己添加的属性 我们称之为自定义属性 index
        console.log(div.getAttribute('id'));
        console.log(div.getAttribute('index'));
    </script>
</body>
</html>
```

### 3.1.2设置移除自定义属性

**设置属性值**

- element. 属性 = '值'  设置内置属性值。
- element.setAttribute('属性'，'值')；

**区别**

- element.属性  设置内置属性
- element.setAttribute('属性')；主要设置自定义的属性(标准)

**移除属性**

```
element.removeAttribute('属性');
```

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="demo" index="1" class="nav"></div>
    <script>
        var div = document.querySelector('div');
        //1. 获取元素的属性值
        //（1）element.属性
        console.log(div.id);
        //(2) element.getAttribute('属性')  get得到属性 attribute 属性的意思
        //我们程序员自己添加的属性 我们称之为自定义属性 index
        console.log(div.getAttribute('id'));
        console.log(div.getAttribute('index'));


        //2. 设置移除自定义属性
        //(1) element.属性 = '值'  设置内置属性值。
        div.id = 'test';
        div.className = 'navs';
        //(2) element.setAttribute('属性'，'值');主要针对自定义属性
        div.setAttribute('index', 2);
        div.setAttribute('class', 'footer');//class特殊  这里面写的就是class  不是className


        //3. 移除属性 element.removeAttribute('属性');
        div.removeAttribute('index');
    </script>
</body>

</html>
```

## **3.2 tab栏切换案例(重要)**

### 布局分析

当鼠标点击上面相应的选项卡(tab)，下面的内容跟随变化

![1570586630539](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570586630539.png)

![1570586660672](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570586660672.png)

### 案例分析

- Tab栏切换有2个大的模块
- 上面选项卡，点击某一个，当前这一个底色会是红色，其余不变(排他思想)修改类名的方式
- 下面的模块内容，会随着上面的选项卡变化，所以下面模块变化写到点击事件里面
- 规律：下面的模块显示内容和上面的选项卡一一对应，相匹配
- 核心思路：给上面的tab_list里面的所有小li添加自定义属性 ，属性值从0开始编号
- 当我们点击tab_list 里面的某一个小li，让tab_content里面对应序号的内容显示，其余隐蔽(排他思想)

### 完成代码

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        .tab_list {
            position: relative;
            background-color: #f7f7f7;
            border: 1px solid #eee;
            border-bottom: 1px solid #e4393c;
            display: block;
            margin-top: -11px;
        }

        .tab_list li {
            position: relative;
            display: inline-block;
            display: inline;
            zoom: 1;
            font-family: "microsoft yahei";
            cursor: pointer;
            padding: 16px 20px;
            font-size: 14px;
        }

        .tab_list .current {
            background-color: #c81623;
            color: #fff;
        }

        .item_info {
            padding: 20px 0 0 20px;
        }

        .item {
            display: none;
            margin-top: 10px;
        }
    </style>
</head>

<body>
    <div class="tab">
        <div class="tab_list">
            <ul>
                <li class="current">商品介绍</li>
                <!--current当前的-->
                <li>规格与包装</li>
                <li>售后保障</li>
                <li>商品评价</li>
                <li>手机社区</li>
            </ul>
        </div>
        <div class="tab_content">
            <div class="item" style="display: block;">
                商品介绍模块内容
            </div>
            <div class="item">
                规格与包装模块内容
            </div>
            <div class="item">
                售后保障模块内容
            </div>
            <div class="item">
                商品评价(50000+)模块内容
            </div>
            <div class="item">
                手机社区模块
            </div>
        </div>
    </div>
    <script>
        //1. 获取元素
        var tab_list = document.querySelector('.tab_list');
        var lis = tab_list.querySelectorAll('li');
        var items = document.querySelectorAll('.item')
        //for循环绑定点击事件
        for (var i = 0; i < lis.length; i++) {
            // 开始给5个li 设置索引号
            lis[i].setAttribute('index', i);

            lis[i].onclick = function (params) {
                //干掉所有人  其余的li清除 class这个类
                for (var i = 0; i < lis.length; i++) {
                    lis[i].className = '';
                }
                //留下自己
                this.className = 'current';

                //2.下面的显示内容模块
                var index = this.getAttribute('index');
                //console.log(index);
                //干掉所有人， 让其余的item 这些div隐藏
                for(var i =0;i < items.length;i++){
                    items[i].style.display = 'none';
                }
                items[index].style.display = 'block';
            }
        }

    </script>
</body>
</html>
```

## 3.3 H5自定义属性

**自定义属性目的：是为了保存并使用数据。有些数据可以保存到页面中而不用保存到数据库中。**

**自定义属性获取是通过getAttribute('属性')获取**

但是有些自定义属性很容易引起歧义，不容易判断是元素内置属性还是自定义属性

H5给我们新增了自定义属性：

1.设置H5自定义属性

H5规定自定义属性data- 开头 作为属性名并且赋值

比如：

```
<div data-index="1"></div>
```

![1570605809309](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570605809309.png)

或者使用JS设置

element.setAttribute('data-index',2)

### 3.3.1获取H5自定义属性

1.兼容性获取 element.getAttribute('data-index');

2.H5新增element.dataset**.index****或者 element.dataset['index'] ie 11才开始支持

```
        //dataset是一个集合 存放所有以data开头的自定义属性
        console.log(div.dataset);
        console.log(div.dataset.index);
        console.log(div.dataset['index']);
```



```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div getTime="20" data-index="2" data-list-name="andy"></div>
    <script>
        var div = document.querySelector('div');
        console.log(div.getTime);
        console.log(div.getAttribute('getTime'));
        div.setAttribute('data-index', 2);
        console.log(div.getAttribute('data-index'));
        //h5 新增的获取自定义属性的方法
        //dataset是一个集合 存放所有以data开头的自定义属性
        console.log(div.dataset);
        console.log(div.dataset.index);
        console.log(div.dataset['index']);

        //如果自定义属性里面有多个-链接的单词，我们获取的时候采取驼峰法命名
        console.log(div.dataset.listName);
        console.log(div.dataset['listName']);
        //getAttribute的兼容性比较好
    </script>
</body>

</html>
```

## 3.3 为什么学习节点操作以及节点简介

**获取元素通常使用两种方式：**

1.利用DOM提供的方法获取元素

- document.getElementByld()
- document.getElementsByTagName()
- document.querySelector等
- 逻辑性不强 繁琐

**2.利用节点层级关系获取元素**

- 利用父子兄节点关系获取元素
- 逻辑性强，但是兼容性稍差

这两种方式都可以获取元素节点，我们后面都会使用，但是节点操作更简单

## 3.4节点概念

网页中的所有内容都是节点(标签、属性、文本、注释等)，在DOM中，节点使用node来表示。

HTML DOM树中的所有节点均可通过JavaScript进行访问，所有HTML元素(节点)均可被修改，也可以创建或删除

![](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570627883064.png)

### 3.4.1节点层级

利用DOM树可以把节点划分为不同的层次关系，常见的是父子兄层级关系

1.父级节点

```
node.parentNode
```

- parentNode属性可返回某节点的父节点，注意是**最近的一个父节点**
- 如果指定的节点没有父节点则返回null

### 3.4.2子节点

```
1. parentNode.childNodes(标准)
```

parentNode.childNodes 返回包含指定节点的子节点的集合，该集合为既时更新的集合

注意：返回值里面包含了所有的子节点，包含元素节点，文本节点等。

如果只想要获得里面的元素节点，则需要专门处理。所以我们一般不提倡使用childNodes

![1570635259636](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570635259636.png)

**2.parentNode.children(非标准)**

parentNode.children是一个只读属性，返回所有的子元素节点。它只返回子元素节点，其余节点不返回(**这个使我们重点掌握的**)。

虽然children是一个非标准，但是得到了各个浏览器的支持，因此放心使用！



```
<body>
    <!-- 节点的优点-->
    <div>我是div</div>
    <span>我是span</span>
    <ul>
        <li>我是li</li>
        <li>我是li</li>
        <li>我是li</li>
        <li>我是li</li>
    </ul>
    <ol>
        <li>我是li</li>
        <li>我是li</li>
        <li>我是li</li>
        <li>我是li</li>
    </ol>
    <div class="demo">
        <div class="box">
            <span class="erweima">X</span>
        </div>
    </div>

    <script>
        //DOM提供的的方法 (API) 获取
        var ul = document.querySelector('ul');
        var lis = ul.querySelectorAll('li');
        // 1.子节点 childNodes 所有的子节点 包含 元素节点  文本节点等等
        console.log(ul.childNodes);
        console.log(ul.childNodes[0].nodeType);
        console.log(ul.childNodes[1].nodeType);
        
        //2. children 获取所有的子元素节点  也是实际开发常用的
        console.log(ul.children);
        
    </script>
</body>
```

3.4.3 节点层级

```
parentNode.firstElementChild
```

firstELementChild返回第一个子元素节点，找不到则返回null

```
parentNode.lastElementChild
```

lastElementChild返回最后一个子元素节点，找不到则返回null

注意： 这两个方法有兼容问题，IE9以上才支持

2.子节点

实际开发中，firstChild和lastChild包含其他节点，操作不方便，而firstElementChild和lastElementChild又有兼容性问题，那么我们如何获取第一个字元素节点或最后一个字元素节点呢？



```
<body>
    <ol>
        <li>我是li1</li>
        <li>我是li2</li>
        <li>我是li3</li>
        <li>我是li4</li>
        <li>我是li5</li>
    </ol>
    <script>
        var ol = document.querySelector('ol');
        // 1. firstChild 第一子节点  不管是文本节点还是元素节点
        console.log(ol.firstChild);
        console.log(ol.lastChild);
        //2. firstElementChild  返回第一个子元素节点
        console.log(ol.firstElementChild);
        console.log(ol.lastElementChild);

        //3. 实际开发的写法  既没有兼容性问题又返回第一个子元素
        console.log(ol.children[0]);
        console.log(ol.children[3]);
        console.log(ol.children[ol.children.length -1]);
        //出身不重要 他实现了他的价值 
    </script>
</body>

```

### 3.4.3新浪下拉菜单

![1570785514554](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570785514554.png)

```
<body>
    <ul class="nav">
        <li>
            <a href="#" id="fl">微博</a>
            <ul>
                <li><a href="">私信</a></li>
                <li><a href="">评论</a></li>
                <li><a href="">@我</a></li>
            </ul>
        </li>

        <li>
            <a href="#" id="fl">微博</a>
            <ul>
                <li><a href="">私信</a></li>
                <li><a href="">评论</a></li>
                <li><a href="">@我</a></li>
            </ul>
        </li>

        <li>
            <a href="#" id="fl">微博</a>
            <ul>
                <li><a href="">私信</a></li>
                <li><a href="">评论</a></li>
                <li><a href="">@我</a></li>
            </ul>
        </li>

        <li>
            <a href="#" id="fl">微博</a>
            <ul>
                <li><a href="">私信</a></li>
                <li><a href="">评论</a></li>
                <li><a href="">@我</a></li>
            </ul>
        </li>
    </ul>
    <script>
        //1. 获取元素
        var nav = document.querySelector('.nav');
        var lis = nav.children;
        for (var i = 0; i < lis.length; i++) {
            lis[i].onmouseover = function (params) {
                this.children[1].style.display = 'block'
            }
            lis[i].onmouseout = function (params) {
                this.children[1].style.display = 'none'
            }
        }

    </script>
</body>
```

### 3.4.4兄弟节点

```
1.  node.nextSibling  //下一个节点
```

nextSibling返回当前元素的下一个兄弟节点，找不到则返回null，同样，也是包含所有的节点

```
2.node.previousSibling
```

previousSibling返回当前元素上一个兄弟节点，找不到则返回null，也是包含所有的节点

```
3. nextElementSibling
```

nextElementSibling返回当前元素下一个兄弟元素，找不到则返回null

```
4. previousElementSibling
```

previousElementSibling返回当前元素上一个兄弟节点，找不到则返回null



**注意： 这两个方法有兼容性问题  IE9才支持** 

可以自己封装一个兼容性的函数

![1570786502683](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570786502683.png)

**实际开发兄弟节点用的少   常用的是父节点  和子节点  parentNode  和children**

### **3.4.5 创建节点**

```
document.createElement('tagName')
```

document.createElement()方法 创建由Tagname 指定的HTML元素 。因为这些元素原先不存在，是根据我们的需求动态生成的，所以我们也称之为**动态创建元素节点**

### 3.4.6添加节点

```
1. node.appendChild(child);
```

node.appendChild()  方法将一个节点添加到指定父节点的子节点列表末尾，类似css里面的after 伪元素。

```
2. node.insertBefore(child,指定元素)
```

node.insertBefore()方法将一个节点添加到父节点的指定子节点**前面**，类似于css 里面的before伪元素。

```
<body>
    <ul>
        <li>123</li>
    </ul>
    <script>
        //1. 创建元素节点
        var li = document.createElement('li');
        //2. 添加节点node.appendChild(child) node 父级 child 是子级 类似于数组中的push
            var ul = document.querySelector('ul')
            ul.appendChild(li);
        //3. 添加节点 node.insertBefore(child,指定元素)
        var lili = document.createElement('li');
        ul.insertBefore(lili,ul.children[0]);
        //4. 我们想要页面添加一个新的元素： 1. 创建元素 2. 添加元素
    </script>
```

### 3.4.7简单版发布留言案例

案例分析

- 核心思路：点击按钮之后，就动态创建一个li ，添加到ul里面。
- 创建li的同时，把文本域里面的值通过li.innerHTML赋值给li
- 如果想要新的留言后面显示就用appendChild 如果想要前面显示就用insertBefore

```
<body>
    <textarea name="" id="" cols="30" rows="10"></textarea>
    <button>发布</button>
    <ul>

    </ul>
    <script>
        // 1. 获取元素
        var btn = document.querySelector('button');
        var text = document.querySelector('textarea');
        var ul = document.querySelector('ul');
        //2. 注册事件
        btn.onclick = function (params) {
            //判断
            if(text.value == ''){
                alert('您没有输入内容');
                return false;
            }else{
                //console.log(text.value);
                //(1)创建元素
                var li = document.createElement('li');
                //现有li才能赋值
                li.innerHTML = text.value;
                //(2)添加元素
                //ul.appendChild(li);按照事件顺序排
                ul.insertBefore(li,ul.children[0]);//符合留言发布效果
            }
        }
    </script>
</body>
```

### 3.4.8删除节点

```
node.removeChild(child)
```

node是父节点  child是子节点

node.removeChild() 方法从DOM中删除一个子节点，返回删除的节点。

一定是删除父节点里面的某一子节点

```
<body>
    <button>删除</button>
    <ul>
        <li>熊大</li>
        <li>熊二</li>
        <li>光头强</li>
    </ul>
    <script>
        //1. 获取元素
        var ul = document.querySelector('ul');
        var btn = document.querySelector('button');
        //2. 删除节点 node.removeChild(child)
        //ul.removeChild(ul.children[2]);//删除了光头强
        //3. 点击按钮依次删除里面的孩子
        btn.onclick = function(params) {
            if(ul.children.length == 0){
                alert('已经全部删除');
                //this.disabled = true; 按钮变成灰色
            }else{
                ul.removeChild(ul.children[0]);
            }
        }
    </script>
</body>
```

### 3.4.9删除留言

案例分析

- 当我们把文本域里面的值赋值给li的时候，多添加一个删除的链接
- 需要把所有的链接获取过来，当我们点击当前的链接的时候，删除当前链接所在的li
- 阻止链接跳转需要添加javascript:void(0) 或者javascript:;



```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        textarea {
            margin-top: 100px;
            margin-left: 100px;
        }

        ul {

            margin-top: 50px;
        }

        li {
            width: 300px;
            padding: 5px;
            background-color: pink;
            color: red;
            font-size: 14px;
            margin: 15px 0;
        }

        li a {
            float: right;
        }
    </style>
</head>

<body>
    <textarea name="" id="" cols="30" rows="10">123</textarea>
    <button>发布</button>
    <ul></ul>
    <script>
        // 1. 获取元素
        var btn = document.querySelector('button');
        var text = document.querySelector('textarea');
        var ul = document.querySelector('ul');
        //2. 注册事件
        btn.onclick = function (params) {
            //判断
            if (text.value == '') {
                //alert('您没有输入内容');
                return false;
            } else {
                //console.log(text.value);
                //(1)创建元素
                var li = document.createElement('li');
                //现有li才能赋值
                li.innerHTML = text.value + "<a href='javascript:;'>删除</a>";
                //(2)添加元素
                //ul.appendChild(li);按照事件顺序排
                ul.insertBefore(li, ul.children[0]);//符合留言发布效果
                //(3) 删除元素 删除的是当前链接的li 它的父亲
                var as = document.querySelectorAll('a');
                for (var i = 0; i < as.length; i++) {
                    as[i].onclick = function (params) {
                        //node.removeChild(child);删除的是li 当前a所在的							li this.parentNode
                        ul.removeChild(this.parentNode);
                    }
                }
            }
        }
    </script>
</body>

</html>
```

### 3.5 复制节点(克隆节点)

```
node.cloneNode()
```

node.cloneNode()方法返回调用该方法的节点的一个副本，也称为克隆节点/拷贝节点



注意：

1.如果括号参数为空或者为false，则是**浅拷贝**，既只克隆复制节点本身，不克隆里面的子节点。(就是只复制标签没有复制内容)

2.如果括号参数为true ，则是深度拷贝，会复制节点本身以及里面所有的子节点

## 3.6 动态生成表格案例

表格跟着数据变动而变动

![1570808664539](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570808664539.png)

- 因为里面的学生数据都是动态的，我们需要js动态生成，这里我们模拟数据，自己定义好数据，数据采取对象形式存储

### 创建行

- 所有的数据都是放在tbody里面的行里面
- 因为行很多，我们需要循环创建多个行(对应多少人)

### 创建单元格

```
            //创建tr行
            var tr = document.createElement('tr');
            tbody.appendChild(tr);
            //行里面创建单元格td 单元格数量取决于 每个对象里面的属性个数  for循环遍历对象  
            //类似于双循环  //里面的for循环管列 td
            for (var k in datas[i]) {
                //创建单元格
                var td = document.createElement('td');
                tr.appendChild(td);
            }
```

### 单元格填充数据

```
        for(var k in obj){
            k 得到的是属性名
            obj[k] 得到的是属性值
        }
```

```
                td.innerHTML = datas[i][k];
                把值赋值给td
```

![1570852127354](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570852127354.png)

### 创建删除单元格

```
            //3. 创建由删除的2个字的单元格
            var td = document.createElement('td');
            td.innerHTML = '<a href="javascript:;">删除</a>';
            tr.appendChild(td);
```

![1570852693258](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570852693258.png)

### 添加删除操作功能

```
        // 4. 删除操作 开始  写在for后面 
        var as = document.querySelectorAll('a');
        for (var i = 0; i < as.length; i++) {
            as[i].onclick = function (params) {
                // 点击a 删除所在的行 (链接的爸爸的爸爸 就是爷爷 所以即使parentNode.parentNode  
                // node.removeChild(child)        
                tbody.removeChild(this.parentNode.parentNode);
            }
```

### 动态生成表格代码

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        table {
            width: 500px;
            margin: 100px auto;
            border-collapse: collapse;
            text-align: center;
        }

        td,
        th {
            border: 1px solid #333;
        }

        thead tr {
            height: 40px;
            background-color: #ccc;

        }

        a {
            text-decoration: none;
        }
    </style>
</head>

<body>
    <table>
        <thead>
            <tr>
                <th>姓名</th>
                <th>科目</th>
                <th>成绩</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
    <script>
        //1. 先准备好学生的数据  数组里面放对象
        var datas = [{
            name: '刘安安',
            subject: 'javascript',
            score: 100
        }, {
            name: '小猪猪',
            subject: 'javascript',
            score: 90
        }
        ];
        //2. 往tbody里面创建行 有几个人（通过数组的长度）我们就创建几行
        var tbody = document.querySelector('tbody');
        for (var i = 0; i < datas.length; i++) {
            //创建tr行
            var tr = document.createElement('tr');
            tbody.appendChild(tr);
            //行里面创建单元格td 单元格数量取决于 每个对象里面的属性个数  for循环遍历对象  
            //类似于双循环  //里面的for循环管列 td
            for (var k in datas[i]) {
                //创建单元格
                var td = document.createElement('td');
                // 把对象里面的属性值datas[i][k]给 td
                //console.log(datas[i][k]);
                //datas[i]  就相当于object
                td.innerHTML = datas[i][k];
                tr.appendChild(td);
            }
            //3. 创建由删除的2个字的单元格
            var td = document.createElement('td');
            td.innerHTML = '<a href="javascript:;">删除</a>';
            tr.appendChild(td);
        }
        // 4. 删除操作 开始  写在for后面 
        var as = document.querySelectorAll('a');
        for (var i = 0; i < as.length; i++) {
            as[i].onclick = function (params) {
                // 点击a 删除所在的行 (链接的爸爸的爸爸 就是爷爷 所以即使parentNode.parentNode  
                // node.removeChild(child)        
                tbody.removeChild(this.parentNode.parentNode);
            }
        }

        //for(var k in obj){
        //    k 得到的是属性名
        //    obj[k] 得到的是属性值
        //}
    </script>
</body>

</html>
<!--
     <tr>
                <td>刘安安</td>
                <td>javascript</td>
                <td>100</td>
                <td><a href="">删除</a></td>
            </tr>

            <tr>
                <td>小猪猪</td>
                <td>javascript</td>
                <td>90</td>
                <td><a href="">删除</a></td>
            </tr>
            <tr>
                <td>佩奇</td>
                <td>javascript</td>
                <td>80</td>
                <td><a href="">删除</a></td>
            </tr>

            <tr>
                <td>坤坤</td>
                <td>javascript</td>
                <td>97</td>
                <td><a href="">删除</a></td>
            </tr>
-->
```

## 3.7 三种动态创建元素区别

- document.write()
- element.innerHTML
- document.createElement()

**区别**

1. document.write 是直接将内容写入页面的内容流，但是文档流执行完毕，则它会导致页面全部重绘
2. innerHTML是将内容写入某个DOM节点，不会导致页面全部重绘
3. innerHTML创建多个元素效率更高(不要拼接字符串，采取数组形式拼接)，结构稍微复杂
4. createElement()创建多个元素效率稍微低一点点，但是结构更清晰

总结：不同浏览器，innerHTML 效率要比 createElement 高

# 4. DOM重点核心总结(关于DOM操作，我们主要针对元素的操作 主要有创建、增删改查、属性操作、事件操作)

文芳对象模型(Document Object Model ,简称DOM)，是W3C组织推荐的处理可扩展标记语言(HTML 或者XML)的标准编程接口

W3C 已经定义了一系列的接口，通过这些DOM接口可以改变网页的内容，结构和样式



1.对于Javascript，为了能够使Javascript操作HTML，javascript 就有了一套自己的DOM编程接口。

2.对于HTML，DOM使得HTML形成一颗DOM 树  包含 文档 元素 节点 

![1570863698980](C:\Users\傲慢与偏见\AppData\Roaming\Typora\typora-user-images\1570863698980.png)

我们获取过里的DOM 元素是一个对象(object)，所以称为 文档对象模型 



关于DOM操作，我们主要针对于元素的操作， 主要有创建， 增，删，改，查 属性操作、事件操作。

### 4.1 创建

1. documewnt.write
2. innerHTML
3. createElement

### 4.2 增

1. appendChild    后面添加

2. insertBefore     前面添加

### 4.3 删除

1. removeChild

### 4.4改

主要修改DOM的元素属性，DOM元素的内容，属性，表单的值等

1.修改元素属性：src 、 href、title等

2.修改普通元素内容：innerHTML、innerText

3.修改表单元素：value、type、disabled

4.修改元素样式：style、className

3.8.5 查

主要获取查询DOM的元素

   1.DOM提供的API方法：getElement、getElementByTagName 古老用法 不太推荐

2. H5提供的新方法：querySelector、querySelectorAII 提倡
3. 利用节点操作获取元素： 父(parentNode)、**子(children)**、兄(previousElementSibling、nextElementSibling) 提倡 

### 4.5属性操作

主要针对于自定义属性

1.setAttribute:设置DOM的属性值

2.getAttribute：得到DOM的属性值

3.removeAttribute移除属性

### 4.6事件操作

| 鼠标事件    | 触发条件         |
| ----------- | ---------------- |
| onclick     | 鼠标点击左键触发 |
| onmouseover | 鼠标经过触发     |
| onmouseout  | 鼠标离开触发     |
| onfocus     | 获得鼠标焦点触发 |
| onblur      | 失去鼠标焦点触发 |
| onmousemove | 鼠标移动触发     |
| onmouseup   | 鼠标弹起触发     |
| onmousedown | 鼠标按下触发     |

